"use strict";(self.webpackChunktbia_documentation=self.webpackChunktbia_documentation||[]).push([[454],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return h}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),d=l(n),h=i,u=d["".concat(c,".").concat(h)]||d[h]||s[h]||r;return n?a.createElement(u,o(o({ref:t},m),{},{components:n})):a.createElement(u,o({ref:t},m))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p.mdxType="string"==typeof e?e:i,o[1]=p;for(var l=2;l<r;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4887:function(e,t,n){n.d(t,{UE:function(){return o},h8:function(){return i},qh:function(){return c},y$:function(){return r}});n(87462),n(63366),n(67294);var a=n(3905),i=function(e){e.children;var t=e.text;return(0,a.kt)("span",{style:{backgroundColor:"#822",color:"#faa",border:"1px #faa solid",borderRadius:"5rem",padding:".2rem .4rem",fontSize:".6rem"}},t)},r=function(e){var t=e.children;return(0,a.kt)("span",{style:{color:"#faa"}},t)};function o(e){e.children;var t=e.version,n="#ffffff";return(0,a.kt)("span",{style:{backgroundColor:"#414141",color:n,border:"1px #ffffff solid",borderRadius:"5px",padding:".05rem .4rem",fontSize:".75rem"}},t)}function p(e,t,n,i){return(0,a.kt)("div",{style:{backgroundColor:i,color:n,border:"1px "+n+" solid",borderRadius:"5px",padding:".1rem .4rem"}},t)}var c=function(e){e.children;return p(0,"Released","#afa","#181")}},410:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return c},metadata:function(){return m},toc:function(){return d}});var a=n(87462),i=n(63366),r=(n(67294),n(3905)),o=n(4887),p=["components"],c={sidebar_position:5,title:"Using Object Interaction Timed"},l=void 0,m={unversionedId:"quick-start/using-object-timed",id:"version-1.0.0/quick-start/using-object-timed",title:"Using Object Interaction Timed",description:"Create Object Interaction Timed",source:"@site/versioned_docs/version-1.0.0/quick-start/using-object-timed.mdx",sourceDirName:"quick-start",slug:"/quick-start/using-object-timed",permalink:"/TBIA-Documentation/docs/1.0.0/quick-start/using-object-timed",draft:!1,editUrl:"https://github.com/twistedbytes-net/TBIA-Documentation/edit/master/versioned_docs/version-1.0.0/quick-start/using-object-timed.mdx",tags:[],version:"1.0.0",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Using Object Interaction Timed"},sidebar:"tutorialSidebar",previous:{title:"Using Interact Animation",permalink:"/TBIA-Documentation/docs/1.0.0/quick-start/using-animation"},next:{title:"Overview",permalink:"/TBIA-Documentation/docs/1.0.0/architecture/overview"}},s={},d=[{value:"Create Object Interaction Timed",id:"create-object-interaction-timed",level:2},{value:"Setup Interactable Actor",id:"setup-interactable-actor",level:2},{value:"We will use a simple technique to play montages on <em>Interactable Actors</em>",id:"we-will-use-a-simple-technique-to-play-montages-on-interactable-actors",level:3},{value:"Setup Door Montage",id:"setup-door-montage",level:2},{value:"Interactable Actor Logic",id:"interactable-actor-logic",level:2}],h={toc:d};function u(e){var t=e.components,c=(0,i.Z)(e,p);return(0,r.kt)("wrapper",(0,a.Z)({},h,c,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"create-object-interaction-timed"},"Create Object Interaction Timed"),(0,r.kt)("p",null,"To create an ",(0,r.kt)("em",{parentName:"p"},"Object Interaction Timed")," ability, right-click in the ",(0,r.kt)("em",{parentName:"p"},"Content Browser"),"\nand select ",(0,r.kt)("inlineCode",{parentName:"p"},"TwistedBytes | Abilities | Object Interaction Timed")," as shown in the image below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Create Object Interaction Timed Ability",src:n(50818).Z,width:"1920",height:"1040"})),(0,r.kt)("h2",{id:"setup-interactable-actor"},"Setup Interactable Actor"),(0,r.kt)("p",null,"Create new ",(0,r.kt)("em",{parentName:"p"},"GAS Actor Base"),", right-click in the ",(0,r.kt)("em",{parentName:"p"},"Content Browser")," and select\n",(0,r.kt)("inlineCode",{parentName:"p"},"TwistedBytes | Actors | GAS Actor Base")," as shown in the image below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Create New GAS Actor Base",src:n(69).Z,width:"1341",height:"924"})),(0,r.kt)("p",null,"Replace ",(0,r.kt)("em",{parentName:"p"},"Default Scene Root")," with ",(0,r.kt)("em",{parentName:"p"},"Skeletal Mesh Component")," ",(0,r.kt)(o.h8,{text:"1",mdxType:"Step"}),". Set your ",(0,r.kt)("em",{parentName:"p"},"Skeletal Mesh"),",\nin our case we are using the ",(0,r.kt)("em",{parentName:"p"},"Door")," mesh ",(0,r.kt)(o.h8,{text:"2",mdxType:"Step"})," that is shipped with ",(0,r.kt)("inlineCode",{parentName:"p"},"TBIA_Demo"),". Then you can easily create\n",(0,r.kt)("em",{parentName:"p"},"Animation Blueprint")," for the ",(0,r.kt)("em",{parentName:"p"},"Door")," mesh by right-clicking in the ",(0,r.kt)("em",{parentName:"p"},"Content Browser"),", select\n",(0,r.kt)("inlineCode",{parentName:"p"},"Animation | Animation Blueprint")," and select the ",(0,r.kt)("em",{parentName:"p"},"Door")," skeletal mesh, after that assign it to the ",(0,r.kt)("em",{parentName:"p"},"Door")," Skeletal mesh\nin the newly created ",(0,r.kt)("em",{parentName:"p"},"GAS Actor Base")," ",(0,r.kt)(o.h8,{text:"3",mdxType:"Step"}),". "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Setup New GAS Actor",src:n(47550).Z,width:"991",height:"865"})),(0,r.kt)("p",null,"Select ",(0,r.kt)("inlineCode",{parentName:"p"},"TBIA_InteractionComponent")," ",(0,r.kt)(o.h8,{text:"1",mdxType:"Step"}),", go to the details panel and add ",(0,r.kt)("inlineCode",{parentName:"p"},"Object Interaction Timed")," ",(0,r.kt)(o.h8,{text:"2",mdxType:"Step"})," to the granted abilities on start."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Grant Ability to New GAS Actor",src:n(46828).Z,width:"1920",height:"1040"})),(0,r.kt)("p",null,"We then add 4 static meshes ",(0,r.kt)(o.h8,{text:"1",mdxType:"Step"})," so that the door have some kind of buttons to interact with,\nand place them next to the door ",(0,r.kt)(o.h8,{text:"2",mdxType:"Step"}),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Add Button Meshes to the Door",src:n(14091).Z,width:"1378",height:"851"})),(0,r.kt)("p",null,"Create new ",(0,r.kt)("em",{parentName:"p"},"Map")," Variable ",(0,r.kt)(o.h8,{text:"1",mdxType:"Step"}),", it consists of key as ",(0,r.kt)(o.h8,{text:"2",mdxType:"Step"})," ",(0,r.kt)("em",{parentName:"p"},"Primitive component")," and value ",(0,r.kt)(o.h8,{text:"3",mdxType:"Step"})," ",(0,r.kt)("em",{parentName:"p"},"Integer"),".\nOpen ",(0,r.kt)("inlineCode",{parentName:"p"},"Construction Script")," and add the button meshes to the ",(0,r.kt)("em",{parentName:"p"},"Map")," variable ",(0,r.kt)(o.h8,{text:"4",mdxType:"Step"}),", ",(0,r.kt)(o.h8,{text:"5",mdxType:"Step"})," as shown in the image below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Setup Door Buttons",src:n(5933).Z,width:"1920",height:"1040"})),(0,r.kt)("h3",{id:"we-will-use-a-simple-technique-to-play-montages-on-interactable-actors"},"We will use a simple technique to play montages on ",(0,r.kt)("em",{parentName:"h3"},"Interactable Actors")),(0,r.kt)("p",null,"Open the Door ",(0,r.kt)("em",{parentName:"p"},"AnimBP")," and drag ",(0,r.kt)("inlineCode",{parentName:"p"},"door_open")," animation sequence into the ",(0,r.kt)("inlineCode",{parentName:"p"},"AnimGraph")," ",(0,r.kt)(o.h8,{text:"1",mdxType:"Step"})," then right-click on the animation sequence and select ",(0,r.kt)("inlineCode",{parentName:"p"},"Convert to single frame animation")," ",(0,r.kt)(o.h8,{text:"2",mdxType:"Step"}),". Now the animation sequence will look like what you see in the image below ",(0,r.kt)(o.h8,{text:"3",mdxType:"Step"}),". Add montage slot ",(0,r.kt)(o.h8,{text:"4",mdxType:"Step"})," to specify from where the montage will override the door animation."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Setup AnimBP for the New GAS Actor Base",src:n(44494).Z,width:"1534",height:"927"})),(0,r.kt)("h2",{id:"setup-door-montage"},"Setup Door Montage"),(0,r.kt)("p",null,"Open ",(0,r.kt)("inlineCode",{parentName:"p"},"door_open_Montage")," make sure the ",(0,r.kt)("em",{parentName:"p"},"Montage Sections")," ",(0,r.kt)(o.h8,{text:"1",mdxType:"Step"}),",",(0,r.kt)(o.h8,{text:"2",mdxType:"Step"}),",",(0,r.kt)(o.h8,{text:"3",mdxType:"Step"})," are named the same as in the ",(0,r.kt)("inlineCode",{parentName:"p"},"GA_ObjectInteractionTimed")," as in the image below. The montage slot should match the defined slot in the ",(0,r.kt)("em",{parentName:"p"},"Door AnimBP")," ",(0,r.kt)(o.h8,{text:"4",mdxType:"Step"}),". Also make sure that the ",(0,r.kt)("em",{parentName:"p"},"Interact")," montage section loops on itself ",(0,r.kt)(o.h8,{text:"5",mdxType:"Step"})," as shown in the image below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Setup Door Montage",src:n(35754).Z,width:"1545",height:"1012"})),(0,r.kt)("h2",{id:"interactable-actor-logic"},"Interactable Actor Logic"),(0,r.kt)("p",null,"Open the new ",(0,r.kt)("inlineCode",{parentName:"p"},"GasActorBase")," and override ",(0,r.kt)("inlineCode",{parentName:"p"},"Is Available for Interaction"),', check if the interacted component\n"The component that the character is looking at" is a button by calling ',(0,r.kt)("em",{parentName:"p"},"find")," on the ",(0,r.kt)("em",{parentName:"p"},"Map")," variable to make sure the component is a button. Also make sure that the ",(0,r.kt)("em",{parentName:"p"},"Door")," is not in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Interacting")," state. If this is true then the ",(0,r.kt)("em",{parentName:"p"},"Door")," is available for interaction, otherwise it's not."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Is Available for Interaction",src:n(29474).Z,width:"1098",height:"667"})),(0,r.kt)("p",null,"Override ",(0,r.kt)("inlineCode",{parentName:"p"},"Is Blocked for Interaction")," and return true which means it's blocked so that no one can interact with the ",(0,r.kt)("em",{parentName:"p"},"Door")," if it's state\nis ",(0,r.kt)("inlineCode",{parentName:"p"},"Interacting"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Is Blocked for Interaction",src:n(73602).Z,width:"1103",height:"712"})),(0,r.kt)("p",null,"override ",(0,r.kt)("inlineCode",{parentName:"p"},"Get Interaction Context"),", make a struct based on ",(0,r.kt)("inlineCode",{parentName:"p"},"TBIA_InteractionContext"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Primary Mesh Montage")," ",(0,r.kt)(o.h8,{text:"1",mdxType:"Step"})," is the interaction animation montage that we want to play on the ",(0,r.kt)("em",{parentName:"p"},"PlayerCharacter")," when interacting with the ",(0,r.kt)("em",{parentName:"p"},"Door"),". "),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Wait for Input Trigger")," ",(0,r.kt)(o.h8,{text:"2",mdxType:"Step"})," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"True")," so that if the ",(0,r.kt)("em",{parentName:"p"},"Player")," released the ",(0,r.kt)("em",{parentName:"p"},"Interaction Button")," the Interaction will cancel. "),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Interaction Duration")," ",(0,r.kt)(o.h8,{text:"3",mdxType:"Step"})," is ",(0,r.kt)("inlineCode",{parentName:"p"},"1 sec")," which is the whole time needed for the ",(0,r.kt)("em",{parentName:"p"},"Interaction")," to finish successfully."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Animation Loop Duration")," ",(0,r.kt)(o.h8,{text:"4",mdxType:"Step"})," is ",(0,r.kt)("inlineCode",{parentName:"p"},"0.8 sec")," which is the time that you want to loop the montage on."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Object Interaction Duration")," ",(0,r.kt)(o.h8,{text:"5",mdxType:"Step"})," is the lifetime of ",(0,r.kt)("inlineCode",{parentName:"p"},"Object Interaction Timed")," Ability that will run on the ",(0,r.kt)("em",{parentName:"p"},"Door"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Object Montage")," ",(0,r.kt)(o.h8,{text:"5",mdxType:"Step"})," is the montage that the ",(0,r.kt)("inlineCode",{parentName:"p"},"Object Interaction Timed")," Ability will try to play when it starts. "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Get Interaction Context",src:n(42792).Z,width:"1106",height:"713"})),(0,r.kt)("p",null,"Go to the ",(0,r.kt)("em",{parentName:"p"},"Event Graph")," and navigate to ",(0,r.kt)("inlineCode",{parentName:"p"},"On Post Interact"),". When this event is triggered on\n",(0,r.kt)("inlineCode",{parentName:"p"},"Authority")," ",(0,r.kt)(o.h8,{text:"1",mdxType:"Step"}),", we want to call ",(0,r.kt)("inlineCode",{parentName:"p"},"Send Gameplay Event to Interacting Actor"),". Pass the ",(0,r.kt)("em",{parentName:"p"},"Interacted Actor")," as ",(0,r.kt)("em",{parentName:"p"},"Self"),", ",(0,r.kt)("em",{parentName:"p"},"Interacted Component")," as the ",(0,r.kt)("em",{parentName:"p"},"Door Skeletal Mesh Component"),", set the ",(0,r.kt)("em",{parentName:"p"},"EventTag")," to ",(0,r.kt)("em",{parentName:"p"},"TBIA.Object.Interaction.Timed"),", ",(0,r.kt)("em",{parentName:"p"},"Interacting Actor")," will be ",(0,r.kt)("em",{parentName:"p"},"Self")," referenced also."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Send Gameplay Event to Interacting Actor",src:n(46551).Z,width:"1100",height:"715"})),(0,r.kt)("p",null,"Place the ",(0,r.kt)("em",{parentName:"p"},"Door")," actor in the world and Press ",(0,r.kt)("em",{parentName:"p"},"Play")," in the Unreal Editor, look at the door button and press the ",(0,r.kt)("inlineCode",{parentName:"p"},"E")," key which is the Interaction button that we configured earlier.\nYou will see the ",(0,r.kt)("em",{parentName:"p"},"PlayerCharacter")," playing the interaction montage for 1 second then the door will open for 3 seconds then it will be closed."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Play",src:n(14665).Z,width:"1661",height:"680"})))}u.isMDXComponent=!0},50818:function(e,t,n){t.Z=n.p+"assets/images/01a_create_object_timed-33d1b7945c30dfc342cbb04b85268b82.png"},69:function(e,t,n){t.Z=n.p+"assets/images/01b_create_GASActor-19c7da6e2f915c15e2909d354dfd1691.png"},47550:function(e,t,n){t.Z=n.p+"assets/images/02a_door_actor-208d84bd6d16f55ef74e881b78f83c2b.png"},46828:function(e,t,n){t.Z=n.p+"assets/images/02b_grant_ability-aa5f4b2e7825f718f89a949f3a8a6db1.png"},14091:function(e,t,n){t.Z=n.p+"assets/images/03a_buttons-7127ab33190a6839ff6d30c8c52d7d1c.png"},5933:function(e,t,n){t.Z=n.p+"assets/images/03b_button_var-4090be2177977552fe5aba5c6462f08f.png"},44494:function(e,t,n){t.Z=n.p+"assets/images/04_door_animbp-ba3dbe901c079be25c2606a76e8a300e.png"},35754:function(e,t,n){t.Z=n.p+"assets/images/05_montage_setup-af3ad828e10dc91956d0487e59aad39e.png"},29474:function(e,t,n){t.Z=n.p+"assets/images/06_is_available-d211ae3a03346724a0496f2305251089.png"},73602:function(e,t,n){t.Z=n.p+"assets/images/07_is_blocked-3ee967ab9b5493e819700ea8961c21d0.png"},42792:function(e,t,n){t.Z=n.p+"assets/images/08_interaction_context-d4cc4e8ee71d9b357768dbeb7de4f311.png"},46551:function(e,t,n){t.Z=n.p+"assets/images/09_send_gameplay_event-8921139baf058329ab76c5d9cac58b13.png"},14665:function(e,t,n){t.Z=n.p+"assets/images/10_play-612a09223deff6d87be7f92a8d934dff.png"}}]);